# AWS Kinesis Data Stream Terraform module
Terraform module for AWS Kinesis Data Stream creation

## Usage

```hcl
module "kinesis_firehouse" {
  source  = "data-platform-hq/kinesis-stream/aws"
  version = "~> 1.0"
  
  tags = {
    Environment : "DEV"
  }
  name = "stream1"
  encryption_type = "KMS"
  stream_mode = "ON_DEMAND"
  shard_level_metrics = [
    "IncomingBytes",
    "OutgoingBytes",
  ]
  consumers = ["consumer-1", "consumer-2"]
}
```

<!-- BEGIN_TF_DOCS -->
## Requirements

| Name                                                                        | Version  |
|-----------------------------------------------------------------------------|----------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform)   | >= 1.0   |
| <a name="requirement_aws"></a> [aws](#requirement\_aws)                     | >= 5.1.0 |

## Providers

| Name                                                | Version  |
|-----------------------------------------------------|----------|
| <a name="provider_aws"></a> [aws](#provider\_aws)   | >= 5.1.0 |

## Modules

No modules.

## Resources

| Name                                                                                                                                       | Type        |
|--------------------------------------------------------------------------------------------------------------------------------------------|-------------|
| [aws_kinesis_stream.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/kinesis_stream)                      | resource    |
| [aws_kinesis_stream_consumer.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/kinesis_stream_consumer)    | resource    |

## Inputs

| Name                                                                                                                                                                        | Description                                                                                                                                                                                                                          | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Default                                                                                                                             | Required |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|:--------:|
| <a name="input_create"></a> [create](#input\_create)                                                                                                                        | Controls if resources should be created (affects nearly all resources)                                                                                                                                                               | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `true`                                                                                                                              |    no    |
| <a name="input_tags"></a> [tags](#input\_tags)                                                                                                                              | A map of tags to add to all resources                                                                                                                                                                                                | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `{}`                                                                                                                                |    no    |
| <a name="input_name"></a> [name](#input\_name)                                                                                                                              | Name of the Kinesis Stream                                                                                                                                                                                                           | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | n/a                                                                                                                                 |   yes    |
| <a name="input_shard_count"></a> [shard\_count](#input\_shard\_count)                                                                                                       | The number of shards that the stream will use. If the stream_mode is PROVISIONED, this field is required                                                                                                                             | `number`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `1`                                                                                                                                 |    no    |
| <a name="input_retention_period"></a> [retention\_period](#input\_retention\_period)                                                                                        | Length of time data records are accessible after they are added to the stream                                                                                                                                                        | `number`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `24`                                                                                                                                |    no    |
| <a name="input_shard_level_metrics"></a> [shard\_level\_metrics](#input\_shard\_level\_metrics)                                                                             | A list of shard-level CloudWatch metrics which can be enabled for the stream                                                                                                                                                         | `list()string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `[]`                                                                                                                                |    no    |
| <a name="input_enforce_consumer_deletion"></a> [enforce\_consumer\_deletion](#input\_enforce\_consumer\_deletion)                                                           | A boolean that indicates all registered consumers should be deregistered from the stream so that the stream can be destroyed without error                                                                                           | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `false`                                                                                                                             |    no    |
| <a name="input_encryption_type"></a> [encryption\_type](#input\_encryption\_type)                                                                                           | The encryption type to use. The only acceptable values are NONE or KMS                                                                                                                                                               | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `NONE`                                                                                                                              |    no    |
| <a name="input_kms_key_id"></a> [kms\_key\_id](#input\_kms\_key\_id)                                                                                                        | The GUID for the customer-managed KMS key to use for encryption. You can also use a Kinesis-owned master key by specifying the alias alias/aws/kinesis                                                                               | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `alias/aws/kinesis`                                                                                                                 |    no    |
| <a name="input_stream_mode"></a> [stream\_mode](#input\_stream\_mode)                                                                                                       | Specifies the capacity mode of the stream. Must be either PROVISIONED or ON_DEMAND                                                                                                                                                   | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `PROVISIONED`                                                                                                                       |    no    |
| <a name="input_consumers"></a> [consumers](#input\_consumers)                                                                                                               | List of Kinesis Stream Consumer names                                                                                                                                                                                                | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `[]`                                                                                                                                |    no    |

## Outputs

| Name                                                                    | Description                                          |
|-------------------------------------------------------------------------|------------------------------------------------------|
| <a name="output_arn"></a> [arn](#output\_arn)                           | The Amazon Resource Name (ARN) specifying the Stream |
| <a name="output_id"></a> [id](#output\_id)                              | The unique Stream id                                 |
| <a name="output_shard_count"></a> [shard\_count](#output\_shard\_count) | The count of Shards for this Stream                  |
<!-- END_TF_DOCS -->

## License

Apache 2 Licensed. For more information please see [LICENSE](https://github.com/data-platform-hq/terraform-azurerm-linux-web-app/tree/main/LICENSE)
